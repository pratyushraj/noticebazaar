{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});import{callLLM}from\"./aiContractAnalysis.js\";async function generateSafeClause(request){const{originalClause,issueContext,issueCategory}=request;if(!originalClause||originalClause.trim().length===0){throw new Error(\"Original clause is required\")}const prompt=`You are an expert legal advisor specializing in influencer-brand collaboration agreements under Indian law.\n\nTASK: Rewrite the following clause in a legally safe, creator-friendly manner that protects the creator's rights while maintaining fairness for both parties.\n\nORIGINAL CLAUSE:\n${originalClause}\n\n${issueContext?`ISSUE CONTEXT: ${issueContext}`:\"\"}\n${issueCategory?`CATEGORY: ${issueCategory}`:\"\"}\n\nREQUIREMENTS:\n1. Maintain the original intent but make it fair and balanced\n2. Protect creator's intellectual property rights\n3. Ensure reasonable payment terms\n4. Avoid unfair exclusivity or liability clauses\n5. Comply with Indian contract law\n6. Use clear, unambiguous language\n\nReturn ONLY a JSON object with this structure:\n{\n  \"safeClause\": \"<the rewritten safe clause>\",\n  \"explanation\": \"<brief explanation of changes made>\"\n}\n\nDo not include any markdown, code blocks, or additional text. Return only the JSON object.`;try{const aiResponse=await callLLM(prompt);let jsonText=aiResponse.trim();jsonText=jsonText.replace(/```json\\n?/g,\"\").replace(/```\\n?/g,\"\").trim();const jsonMatch=jsonText.match(/\\{[\\s\\S]*\\}/);if(jsonMatch){jsonText=jsonMatch[0]}const parsed=JSON.parse(jsonText);if(!parsed.safeClause){throw new Error(\"AI did not generate a safe clause\")}return{safeClause:parsed.safeClause.trim(),explanation:parsed.explanation?.trim()||void 0}}catch(error){console.error(\"[ClauseGenerator] Failed to generate safe clause:\",error);throw new Error(`Failed to generate safe clause: ${error.message}`)}}__name(generateSafeClause,\"generateSafeClause\");export{generateSafeClause};\n","warnings":[],"map":{"version":3,"mappings":"kHAIA,OAAS,YAAe,0BAgBxB,eAAsB,mBACpB,QACmC,CACnC,KAAM,CAAE,eAAgB,aAAc,aAAc,EAAI,QAExD,GAAI,CAAC,gBAAkB,eAAe,KAAK,EAAE,SAAW,EAAG,CACzD,MAAM,IAAI,MAAM,6BAA6B,CAC/C,CAEA,MAAM,OAAS;AAAA;AAAA;AAAA;AAAA;AAAA,EAKf,cAAc;AAAA;AAAA,EAEd,aAAe,kBAAkB,YAAY,GAAK,EAAE;AAAA,EACpD,cAAgB,aAAa,aAAa,GAAK,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4FAkBjD,GAAI,CACF,MAAM,WAAa,MAAM,QAAQ,MAAM,EAGvC,IAAI,SAAW,WAAW,KAAK,EAC/B,SAAW,SAAS,QAAQ,cAAe,EAAE,EAAE,QAAQ,UAAW,EAAE,EAAE,KAAK,EAE3E,MAAM,UAAY,SAAS,MAAM,aAAa,EAC9C,GAAI,UAAW,CACb,SAAW,UAAU,CAAC,CACxB,CAEA,MAAM,OAAS,KAAK,MAAM,QAAQ,EAElC,GAAI,CAAC,OAAO,WAAY,CACtB,MAAM,IAAI,MAAM,mCAAmC,CACrD,CAEA,MAAO,CACL,WAAY,OAAO,WAAW,KAAK,EACnC,YAAa,OAAO,aAAa,KAAK,GAAK,MAC7C,CACF,OAAS,MAAY,CACnB,QAAQ,MAAM,oDAAqD,KAAK,EACxE,MAAM,IAAI,MAAM,mCAAmC,MAAM,OAAO,EAAE,CACpE,CACF,CA7DsB","names":[],"ignoreList":[],"sources":["/Users/pratyushraj/Documents/noticebazaar/server/src/services/clauseGenerator.ts"],"sourcesContent":[null]}}