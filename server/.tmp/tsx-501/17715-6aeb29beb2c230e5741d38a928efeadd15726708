{"code":"import{Router}from\"express\";import{supabase}from\"../lib/supabase.js\";import{uploadPDF,getInviteStatus,downloadSignedPDF,verifyWebhookSignature,downloadPDFFromUrl}from\"../services/meonService.js\";import{generateInvoice}from\"../services/invoiceService.js\";const router=Router();const publicRouter=Router();publicRouter.get(\"/config\",(req,res)=>{return res.json({success:true,configured:!!process.env.MEON_USERNAME&&!!process.env.MEON_CLIENT_SECRET_KEY&&!!process.env.MEON_BASE_URL})});router.post(\"/send\",async(req,res)=>{try{if(!req.user||!req.user.id){return res.status(401).json({success:false,error:\"Authentication required\"})}const userId=req.user.id;const{dealId,pdfUrl,brandName,creatorName,brandPhone,creatorPhone,brandEmail,creatorEmail}=req.body;if(!dealId){return res.status(400).json({success:false,error:\"Missing required field: dealId\"})}console.log(\"[eSign] Looking up deal:\",dealId);const{data:deal,error:dealError}=await supabase.from(\"brand_deals\").select(\"*\").eq(\"id\",dealId).maybeSingle();if(dealError){console.error(\"[eSign] Error fetching deal:\",dealError);return res.status(500).json({success:false,error:`Database error: ${dealError.message}`})}if(!deal){return res.status(404).json({success:false,error:\"Deal not found\"})}if(deal.creator_id!==userId&&req.user?.role!==\"admin\"){return res.status(403).json({success:false,error:\"Access denied\"})}const finalPdfUrl=pdfUrl||deal.contract_file_url;if(!finalPdfUrl){return res.status(400).json({success:false,error:\"Contract PDF URL is required. Please ensure the deal has a contract file uploaded.\"})}const{data:creatorProfile}=await supabase.from(\"profiles\").select(\"id, first_name, last_name, phone, email\").eq(\"id\",deal.creator_id).maybeSingle();const finalCreatorName=creatorName||(creatorProfile?`${creatorProfile.first_name||\"\"} ${creatorProfile.last_name||\"\"}`.trim():\"\")||\"Creator\";const finalCreatorPhone=creatorPhone||(creatorProfile?.phone||\"\");const finalCreatorEmail=creatorEmail||(creatorProfile?.email||\"\");const dealBrandPhone=deal.brand_phone||brandPhone||\"\";const dealBrandEmail=deal.brand_email||brandEmail||\"\";const finalBrandName=brandName||deal.brand_name;if(!dealBrandPhone||dealBrandPhone.trim()===\"\"||dealBrandPhone===\"+91\"||dealBrandPhone===\"+91 \"){return res.status(400).json({success:false,error:\"Brand phone number is required for eSign\"})}if(!finalCreatorPhone||finalCreatorPhone.trim()===\"\"){return res.status(400).json({success:false,error:\"Creator phone number is required for eSign\"})}if(!process.env.MEON_USERNAME||!process.env.MEON_CLIENT_SECRET_KEY){return res.status(500).json({success:false,error:\"Meon eSign is not configured. Please set MEON_USERNAME and MEON_CLIENT_SECRET_KEY environment variables.\"})}console.log(\"[eSign] Starting eSign workflow:\",{dealId:deal.id,pdfUrl:finalPdfUrl,brandName:finalBrandName,creatorName:finalCreatorName});let pdfBuffer;try{pdfBuffer=await downloadPDFFromUrl(finalPdfUrl);console.log(\"[eSign] PDF downloaded successfully, size:\",pdfBuffer.length,\"bytes\")}catch(error){console.error(\"[eSign] PDF download failed:\",error);return res.status(500).json({success:false,error:`Failed to download contract PDF: ${error.message}`})}const fileName=`${finalBrandName}_${finalCreatorName}_Contract_${Date.now()}.pdf`;const uploadResult=await uploadPDF(pdfBuffer,fileName);if(!uploadResult.success||!uploadResult.fileId){console.error(\"[eSign] Upload failed:\",uploadResult.error);return res.status(500).json({success:false,error:uploadResult.error||\"Failed to upload PDF to Meon\"})}console.log(\"[eSign] PDF uploaded to Meon, token:\",uploadResult.fileId);const token=uploadResult.fileId;const esignUrl=uploadResult.esignUrl;if(!token){console.error(\"[eSign] No token received from Meon upload\");return res.status(500).json({success:false,error:\"Failed to get signing token from Meon\"})}console.log(\"[eSign] Meon upload successful:\",{token,esignUrl});const updateData={esign_provider:\"meon\",esign_invitation_id:token,esign_status:\"sent\",esign_url:esignUrl||null,updated_at:new Date().toISOString()};const{error:updateError}=await supabase.from(\"brand_deals\").update(updateData).eq(\"id\",dealId);if(updateError){console.error(\"[eSign] Failed to update deal:\",updateError);return res.status(500).json({success:false,error:`Failed to update deal: ${updateError.message}`})}console.log(\"[eSign] Deal updated successfully with eSign information\");return res.json({success:true,invitationId:token,signUrl:esignUrl,message:\"Document sent for eSign successfully\"})}catch(error){console.error(\"[eSign] Unhandled error:\",error);return res.status(500).json({success:false,error:error.message||\"Internal server error\"})}});publicRouter.post(\"/webhook\",async(req,res)=>{try{const rawBody=JSON.stringify(req.body);const isValid=verifyWebhookSignature(req,rawBody);if(!isValid){console.error(\"[eSign Webhook] Invalid signature\");return res.status(401).json({success:false,error:\"Invalid webhook signature\"})}const{invitationId,status,event}=req.body;console.log(\"[eSign Webhook] Received webhook:\",{invitationId,status,event,body:req.body});if(!invitationId){return res.status(400).json({success:false,error:\"Missing invitationId in webhook payload\"})}const{data:deal,error:dealError}=await supabase.from(\"brand_deals\").select(\"*\").eq(\"esign_invitation_id\",invitationId).maybeSingle();if(dealError||!deal){console.error(\"[eSign Webhook] Deal not found for invitationId:\",invitationId);return res.status(404).json({success:false,error:\"Deal not found for this invitation\"})}if(status===\"SIGNED\"||event===\"document.signed\"||status===\"signed\"){console.log(\"[eSign Webhook] Document signed, downloading signed PDF...\");const downloadResult=await downloadSignedPDF(invitationId);if(!downloadResult.success||!downloadResult.pdfBuffer){console.error(\"[eSign Webhook] Failed to download signed PDF:\",downloadResult.error);await supabase.from(\"brand_deals\").update({esign_status:\"failed\",updated_at:new Date().toISOString()}).eq(\"id\",deal.id);return res.status(500).json({success:false,error:downloadResult.error||\"Failed to download signed PDF\"})}const creatorId=deal.creator_id;const fileName=`signed-contract-${deal.id}-${Date.now()}.pdf`;const filePath=`${creatorId}/signed-contracts/${fileName}`;const{error:uploadError}=await supabase.storage.from(\"creator-assets\").upload(filePath,downloadResult.pdfBuffer,{contentType:\"application/pdf\",cacheControl:\"3600\",upsert:false});if(uploadError){console.error(\"[eSign Webhook] Failed to upload signed PDF:\",uploadError);return res.status(500).json({success:false,error:`Failed to upload signed PDF: ${uploadError.message}`})}const{data:publicUrlData}=supabase.storage.from(\"creator-assets\").getPublicUrl(filePath);if(!publicUrlData?.publicUrl){console.error(\"[eSign Webhook] Failed to get public URL for signed PDF\");return res.status(500).json({success:false,error:\"Failed to get public URL for signed PDF\"})}console.log(\"[eSign Webhook] Signed PDF uploaded:\",publicUrlData.publicUrl);const updateData={esign_status:\"signed\",signed_pdf_url:publicUrlData.publicUrl,signed_contract_path:filePath,signed_at:new Date().toISOString(),updated_at:new Date().toISOString()};const{error:updateError}=await supabase.from(\"brand_deals\").update(updateData).eq(\"id\",deal.id);if(updateError){console.error(\"[eSign Webhook] Failed to update deal:\",updateError);return res.status(500).json({success:false,error:`Failed to update deal: ${updateError.message}`})}try{console.log(\"[eSign Webhook] Generating invoice for signed deal...\");await generateInvoice(deal.id,creatorId);console.log(\"[eSign Webhook] Invoice generated successfully\")}catch(invoiceError){console.error(\"[eSign Webhook] Invoice generation failed (non-fatal):\",invoiceError.message)}console.log(\"[eSign Webhook] Deal updated successfully, status: signed\");return res.json({success:true,message:\"Webhook processed successfully\"})}else if(status===\"FAILED\"||event===\"document.failed\"||status===\"failed\"){await supabase.from(\"brand_deals\").update({esign_status:\"failed\",updated_at:new Date().toISOString()}).eq(\"id\",deal.id);console.log(\"[eSign Webhook] Deal status updated to failed\");return res.json({success:true,message:\"Webhook processed, status: failed\"})}else{const newStatus=status===\"PENDING\"||status===\"pending\"?\"pending\":\"sent\";await supabase.from(\"brand_deals\").update({esign_status:newStatus,updated_at:new Date().toISOString()}).eq(\"id\",deal.id);console.log(\"[eSign Webhook] Deal status updated to:\",newStatus);return res.json({success:true,message:`Webhook processed, status: ${newStatus}`})}}catch(error){console.error(\"[eSign Webhook] Unhandled error:\",error);return res.status(500).json({success:false,error:error.message||\"Internal server error\"})}});router.get(\"/status/:dealId\",async(req,res)=>{try{if(!req.user||!req.user.id){return res.status(401).json({success:false,error:\"Authentication required\"})}const userId=req.user.id;const{dealId}=req.params;const{data:deal,error:dealError}=await supabase.from(\"brand_deals\").select(\"*\").eq(\"id\",dealId).maybeSingle();if(dealError||!deal){return res.status(404).json({success:false,error:\"Deal not found\"})}if(deal.creator_id!==userId&&req.user?.role!==\"admin\"){return res.status(403).json({success:false,error:\"Access denied\"})}const invitationId=deal.esign_invitation_id;if(!invitationId){return res.json({success:true,status:\"not_sent\",message:\"Document has not been sent for eSign yet\"})}const statusResult=await getInviteStatus(invitationId);if(!statusResult.success){return res.json({success:true,status:deal.esign_status||\"unknown\",signedPdfUrl:deal.signed_pdf_url||null,error:statusResult.error})}return res.json({success:true,status:statusResult.status||deal.esign_status,invitationId,signUrl:deal.esign_url,signedPdfUrl:deal.signed_pdf_url||null,signedAt:deal.signed_at||null,meonStatus:statusResult.data})}catch(error){console.error(\"[eSign] Get status error:\",error);return res.status(500).json({success:false,error:error.message||\"Internal server error\"})}});var esign_default=router;export{esign_default as default,publicRouter};\n","warnings":[],"map":{"version":3,"mappings":"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","names":[],"ignoreList":[],"sources":["/Users/pratyushraj/Documents/noticebazaar/server/src/routes/esign.ts"],"sourcesContent":[null]}}