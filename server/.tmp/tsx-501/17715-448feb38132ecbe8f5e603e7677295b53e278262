{"code":"import express from\"express\";import{supabase}from\"../lib/supabase.js\";const router=express.Router();router.get(\"/\",async(req,res)=>{try{const{category,limit=\"50\",offset=\"0\"}=req.query;let query=supabase.from(\"profiles\").select(`\n        id,\n        username,\n        first_name,\n        last_name,\n        business_name,\n        creator_category,\n        bio,\n        instagram_handle,\n        youtube_channel_id,\n        tiktok_handle,\n        twitter_handle,\n        facebook_profile_url,\n        instagram_followers,\n        instagram_profile_photo,\n        last_instagram_sync,\n        youtube_subs,\n        tiktok_followers,\n        twitter_followers,\n        facebook_followers\n      `).eq(\"role\",\"creator\").not(\"username\",\"is\",null).order(\"created_at\",{ascending:false}).range(parseInt(offset,10),parseInt(offset,10)+parseInt(limit,10)-1);if(category&&category!==\"all\"){query=query.eq(\"creator_category\",category)}const{data:profiles,error}=await query;if(error){console.error(\"[Creators] Error fetching creators:\",error);return res.status(500).json({success:false,error:\"Failed to fetch creators\"})}const creators=(profiles||[]).map(profile=>{const platforms=[];if(profile.instagram_handle){platforms.push({name:\"Instagram\",handle:profile.instagram_handle,followers:profile.instagram_followers||void 0})}if(profile.youtube_channel_id){platforms.push({name:\"YouTube\",handle:profile.youtube_channel_id,followers:profile.youtube_subs||void 0})}if(profile.tiktok_handle){platforms.push({name:\"TikTok\",handle:profile.tiktok_handle,followers:profile.tiktok_followers||void 0})}if(profile.twitter_handle){platforms.push({name:\"Twitter\",handle:profile.twitter_handle,followers:profile.twitter_followers||void 0})}if(profile.facebook_profile_url){platforms.push({name:\"Facebook\",handle:profile.facebook_profile_url,followers:profile.facebook_followers||void 0})}const creatorName=profile.business_name||`${profile.first_name||\"\"} ${profile.last_name||\"\"}`.trim()||\"Creator\";return{id:profile.id,username:profile.username,name:creatorName,category:profile.creator_category,bio:profile.bio,profile_photo:profile.instagram_profile_photo||null,followers:profile.instagram_followers??null,last_instagram_sync:profile.last_instagram_sync||null,platforms}});res.json({success:true,creators,count:creators.length})}catch(error){console.error(\"[Creators] Error in GET /:\",error);res.status(500).json({success:false,error:\"Internal server error\"})}});router.get(\"/categories\",async(req,res)=>{try{const{data:profiles,error}=await supabase.from(\"profiles\").select(\"creator_category\").eq(\"role\",\"creator\").not(\"creator_category\",\"is\",null);if(error){console.error(\"[Creators] Error fetching categories:\",error);return res.status(500).json({success:false,error:\"Failed to fetch categories\"})}const categories=Array.from(new Set((profiles||[]).map(p=>p.creator_category).filter(Boolean))).sort();res.json({success:true,categories})}catch(error){console.error(\"[Creators] Error in GET /categories:\",error);res.status(500).json({success:false,error:\"Internal server error\"})}});var creators_default=router;export{creators_default as default};\n","warnings":[],"map":{"version":3,"mappings":"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","names":[],"ignoreList":[],"sources":["/Users/pratyushraj/Documents/noticebazaar/server/src/routes/creators.ts"],"sourcesContent":[null]}}