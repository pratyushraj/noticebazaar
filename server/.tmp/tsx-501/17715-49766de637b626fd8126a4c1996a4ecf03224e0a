{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});async function generateReportPdf(analysis){const html=generateReportHtml(analysis);let browser;if(process.env.VERCEL){const chromium=(await import(\"@sparticuz/chromium\").then(s=>{const e=\"default\";return s[e]&&typeof s[e]==\"object\"&&\"__esModule\"in s[e]?s[e]:s})).default;const puppeteerCore=(await import(\"puppeteer-core\").then(s=>{const e=\"default\";return s[e]&&typeof s[e]==\"object\"&&\"__esModule\"in s[e]?s[e]:s})).default;browser=await puppeteerCore.launch({args:chromium.args,defaultViewport:chromium.defaultViewport,executablePath:await chromium.executablePath(),headless:chromium.headless})}else{const puppeteerCore=(await import(\"puppeteer-core\").then(s=>{const e=\"default\";return s[e]&&typeof s[e]==\"object\"&&\"__esModule\"in s[e]?s[e]:s})).default;const executablePath=process.env.PUPPETEER_EXECUTABLE_PATH;if(!executablePath){throw new Error(\"PUPPETEER_EXECUTABLE_PATH is required for local PDF generation when using puppeteer-core.\")}browser=await puppeteerCore.launch({executablePath,headless:\"new\",args:[\"--no-sandbox\",\"--disable-setuid-sandbox\"]})}try{const page=await browser.newPage();await page.setContent(html,{waitUntil:\"networkidle0\"});const pdf=await page.pdf({format:\"A4\",printBackground:true,margin:{top:\"20mm\",right:\"15mm\",bottom:\"20mm\",left:\"15mm\"}});return Buffer.from(pdf)}finally{await browser.close()}}__name(generateReportPdf,\"generateReportPdf\");function generateReportHtml(analysis){const riskColorMap={low:\"#10b981\",medium:\"#f59e0b\",high:\"#ef4444\"};const riskColor=riskColorMap[analysis.overallRisk]||\"#6b7280\";return`\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <style>\n    * { margin: 0; padding: 0; box-sizing: border-box; }\n    body {\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      padding: 40px 20px;\n      color: #1f2937;\n    }\n    .container {\n      max-width: 800px;\n      margin: 0 auto;\n      background: white;\n      border-radius: 24px;\n      padding: 40px;\n      box-shadow: 0 20px 60px rgba(0,0,0,0.3);\n    }\n    .header {\n      text-align: center;\n      margin-bottom: 40px;\n      padding-bottom: 30px;\n      border-bottom: 2px solid #e5e7eb;\n    }\n    .header h1 {\n      font-size: 32px;\n      color: #667eea;\n      margin-bottom: 10px;\n    }\n    .score-card {\n      background: linear-gradient(135deg, ${riskColor}15 0%, ${riskColor}05 100%);\n      border: 2px solid ${riskColor}40;\n      border-radius: 16px;\n      padding: 30px;\n      text-align: center;\n      margin-bottom: 30px;\n    }\n    .score-value {\n      font-size: 64px;\n      font-weight: bold;\n      color: ${riskColor};\n      margin: 10px 0;\n    }\n    .risk-badge {\n      display: inline-block;\n      padding: 8px 20px;\n      border-radius: 20px;\n      background: ${riskColor};\n      color: white;\n      font-weight: 600;\n      text-transform: uppercase;\n      font-size: 14px;\n    }\n    .section {\n      margin-bottom: 30px;\n    }\n    .section-title {\n      font-size: 20px;\n      font-weight: 600;\n      color: #1f2937;\n      margin-bottom: 15px;\n      padding-bottom: 10px;\n      border-bottom: 1px solid #e5e7eb;\n    }\n    .issue-item, .verified-item {\n      background: #f9fafb;\n      border-radius: 12px;\n      padding: 20px;\n      margin-bottom: 15px;\n      border-left: 4px solid;\n    }\n    .issue-item {\n      border-left-color: #f59e0b;\n    }\n    .verified-item {\n      border-left-color: #10b981;\n    }\n    .issue-title, .verified-title {\n      font-weight: 600;\n      margin-bottom: 8px;\n      color: #1f2937;\n    }\n    .issue-description, .verified-description {\n      color: #6b7280;\n      line-height: 1.6;\n      margin-bottom: 10px;\n    }\n    .recommendation {\n      background: #eff6ff;\n      padding: 12px;\n      border-radius: 8px;\n      margin-top: 10px;\n      font-size: 14px;\n      color: #1e40af;\n    }\n    .key-terms {\n      display: grid;\n      grid-template-columns: repeat(2, 1fr);\n      gap: 15px;\n      margin-top: 15px;\n    }\n    .term-card {\n      background: #f9fafb;\n      padding: 15px;\n      border-radius: 12px;\n      border: 1px solid #e5e7eb;\n    }\n    .term-label {\n      font-size: 12px;\n      color: #6b7280;\n      text-transform: uppercase;\n      margin-bottom: 5px;\n    }\n    .term-value {\n      font-weight: 600;\n      color: #1f2937;\n    }\n    .footer {\n      text-align: center;\n      margin-top: 40px;\n      padding-top: 20px;\n      border-top: 1px solid #e5e7eb;\n      color: #6b7280;\n      font-size: 12px;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"header\">\n      <h1>Contract Analysis Report</h1>\n      <p style=\"color: #6b7280;\">Generated by CreatorArmour AI</p>\n    </div>\n\n    <div class=\"score-card\">\n      <div style=\"font-size: 14px; color: #6b7280; margin-bottom: 10px;\">Protection Score</div>\n      <div class=\"score-value\">${analysis.protectionScore}</div>\n      <div class=\"risk-badge\">${analysis.overallRisk} Risk</div>\n    </div>\n\n    ${analysis.issues.length>0?`\n    <div class=\"section\">\n      <div class=\"section-title\">\\u26A0\\uFE0F Issues Found (${analysis.issues.length})</div>\n      ${analysis.issues.map(issue=>`\n        <div class=\"issue-item\">\n          <div class=\"issue-title\">${issue.title}</div>\n          <div class=\"issue-description\">${issue.description}</div>\n          ${issue.clause?`<div style=\"font-size: 12px; color: #6b7280; margin-top: 5px;\">\\u{1F4C4} ${issue.clause}</div>`:\"\"}\n          <div class=\"recommendation\">\\u{1F4A1} Recommendation: ${issue.recommendation}</div>\n        </div>\n      `).join(\"\")}\n    </div>\n    `:\"\"}\n\n    ${analysis.verified.length>0?`\n    <div class=\"section\">\n      <div class=\"section-title\">\\u2705 Verified Clauses (${analysis.verified.length})</div>\n      ${analysis.verified.map(item=>`\n        <div class=\"verified-item\">\n          <div class=\"verified-title\">${item.title}</div>\n          <div class=\"verified-description\">${item.description}</div>\n          ${item.clause?`<div style=\"font-size: 12px; color: #6b7280; margin-top: 5px;\">\\u{1F4C4} ${item.clause}</div>`:\"\"}\n        </div>\n      `).join(\"\")}\n    </div>\n    `:\"\"}\n\n    ${analysis.keyTerms&&Object.keys(analysis.keyTerms).length>0?`\n    <div class=\"section\">\n      <div class=\"section-title\">\\u{1F4CB} Key Terms</div>\n      <div class=\"key-terms\">\n        ${Object.entries(analysis.keyTerms).map(([key,value])=>value?`\n          <div class=\"term-card\">\n            <div class=\"term-label\">${key.replace(/([A-Z])/g,\" $1\").trim()}</div>\n            <div class=\"term-value\">${value}</div>\n          </div>\n        `:\"\").join(\"\")}\n      </div>\n    </div>\n    `:\"\"}\n\n    ${analysis.recommendations.length>0?`\n    <div class=\"section\">\n      <div class=\"section-title\">\\u{1F4A1} Recommendations</div>\n      <ul style=\"list-style: none; padding: 0;\">\n        ${analysis.recommendations.map(rec=>`\n          <li style=\"padding: 10px 0; border-bottom: 1px solid #e5e7eb;\">\n            \\u2022 ${rec}\n          </li>\n        `).join(\"\")}\n      </ul>\n    </div>\n    `:\"\"}\n\n    <div class=\"footer\">\n      <p>This report was generated automatically. Please consult with a legal advisor for professional advice.</p>\n      <p style=\"margin-top: 10px;\">\\xA9 ${new Date().getFullYear()} CreatorArmour. All rights reserved.</p>\n    </div>\n  </div>\n</body>\n</html>\n  `}__name(generateReportHtml,\"generateReportHtml\");export{generateReportPdf};\n","warnings":[],"map":{"version":3,"mappings":"kHAMA,eAAsB,kBAAkB,SAA2C,CACjF,MAAM,KAAO,mBAAmB,QAAQ,EAExC,IAAI,QAEJ,GAAI,QAAQ,IAAI,OAAQ,CAEtB,MAAM,UAAY,KAAM,QAAO,qBAAqB,+FAAG,QACvD,MAAM,eAAiB,KAAM,QAAO,gBAAgB,+FAAG,QAEvD,QAAU,MAAM,cAAc,OAAO,CACnC,KAAM,SAAS,KACf,gBAAiB,SAAS,gBAC1B,eAAgB,MAAM,SAAS,eAAe,EAC9C,SAAU,SAAS,QACrB,CAAC,CACH,KAAO,CAEL,MAAM,eAAiB,KAAM,QAAO,gBAAgB,+FAAG,QACvD,MAAM,eAAiB,QAAQ,IAAI,0BACnC,GAAI,CAAC,eAAgB,CACnB,MAAM,IAAI,MACR,2FACF,CACF,CACA,QAAU,MAAM,cAAc,OAAO,CACnC,eACA,SAAU,MACV,KAAM,CAAC,eAAgB,0BAA0B,CACnD,CAAC,CACH,CAEA,GAAI,CACF,MAAM,KAAO,MAAM,QAAQ,QAAQ,EACnC,MAAM,KAAK,WAAW,KAAM,CAAE,UAAW,cAAe,CAAC,EAEzD,MAAM,IAAM,MAAM,KAAK,IAAI,CACzB,OAAQ,KACR,gBAAiB,KACjB,OAAQ,CAAE,IAAK,OAAQ,MAAO,OAAQ,OAAQ,OAAQ,KAAM,MAAO,CACrE,CAAC,EAED,OAAO,OAAO,KAAK,GAAG,CACxB,QAAE,CACA,MAAM,QAAQ,MAAM,CACtB,CACF,CA9CsB,8CAgDtB,SAAS,mBAAmB,SAAkC,CAC5D,MAAM,aAAuC,CAC3C,IAAK,UACL,OAAQ,UACR,KAAM,SACR,EACA,MAAM,UAAY,aAAa,SAAS,WAAW,GAAK,UAExD,MAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAiCmC,SAAS,UAAU,SAAS;AAAA,0BAC9C,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eASpB,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAOJ,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAyFI,SAAS,eAAe;AAAA,gCACzB,SAAS,WAAW;AAAA;AAAA;AAAA,MAG9C,SAAS,OAAO,OAAS,EAAI;AAAA;AAAA,8DAEiB,SAAS,OAAO,MAAM;AAAA,QAClE,SAAS,OAAO,IAAK,OAAe;AAAA;AAAA,qCAEP,MAAM,KAAK;AAAA,2CACL,MAAM,WAAW;AAAA,YAChD,MAAM,OAAS,4EAAqE,MAAM,MAAM,SAAW,EAAE;AAAA,kEAC9D,MAAM,cAAc;AAAA;AAAA,OAExE,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,MAET,EAAE;AAAA;AAAA,MAEJ,SAAS,SAAS,OAAS,EAAI;AAAA;AAAA,4DAEkB,SAAS,SAAS,MAAM;AAAA,QACvE,SAAS,SAAS,IAAK,MAAc;AAAA;AAAA,wCAEL,KAAK,KAAK;AAAA,8CACJ,KAAK,WAAW;AAAA,YAClD,KAAK,OAAS,4EAAqE,KAAK,MAAM,SAAW,EAAE;AAAA;AAAA,OAEhH,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,MAET,EAAE;AAAA;AAAA,MAEJ,SAAS,UAAY,OAAO,KAAK,SAAS,QAAQ,EAAE,OAAS,EAAI;AAAA;AAAA;AAAA;AAAA,UAI7D,OAAO,QAAQ,SAAS,QAAQ,EAAE,IAAI,CAAC,CAAC,IAAK,KAAK,IAAM,MAAQ;AAAA;AAAA,sCAEpC,IAAI,QAAQ,WAAY,KAAK,EAAE,KAAK,CAAC;AAAA,sCACrC,KAAK;AAAA;AAAA,UAE/B,EAAE,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,MAGhB,EAAE;AAAA;AAAA,MAEJ,SAAS,gBAAgB,OAAS,EAAI;AAAA;AAAA;AAAA;AAAA,UAIlC,SAAS,gBAAgB,IAAK,KAAgB;AAAA;AAAA,qBAExC,GAAG;AAAA;AAAA,SAEV,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,MAGX,EAAE;AAAA;AAAA;AAAA;AAAA,0CAI6B,IAAI,KAAK,EAAE,YAAY,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,GAM/D,CArNS","names":[],"ignoreList":[],"sources":["/Users/pratyushraj/Documents/noticebazaar/server/src/services/pdfGenerator.ts"],"sourcesContent":[null]}}