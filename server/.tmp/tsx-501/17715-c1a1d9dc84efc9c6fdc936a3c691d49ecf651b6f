{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});import{supabase}from\"../lib/supabase.js\";async function createContractReadyToken(options){const{dealId,submissionId,creatorId,expiresAt}=options;if(!creatorId){throw new Error(\"creatorId is required\")}if(!dealId&&!submissionId){throw new Error(\"Either dealId or submissionId is required\")}if(dealId){const{data:deal,error:dealError}=await supabase.from(\"brand_deals\").select(\"id, creator_id\").eq(\"id\",dealId).eq(\"creator_id\",creatorId).maybeSingle();if(dealError||!deal){throw new Error(\"Deal not found or access denied\")}}if(submissionId){const{data:submission,error:submissionError}=await supabase.from(\"deal_details_submissions\").select(\"id, creator_id\").eq(\"id\",submissionId).eq(\"creator_id\",creatorId).maybeSingle();if(submissionError||!submission){throw new Error(\"Submission not found or access denied\")}}const{data:token,error:tokenError}=await supabase.from(\"contract_ready_tokens\").insert({deal_id:dealId||null,submission_id:submissionId||null,created_by:creatorId,expires_at:expiresAt?expiresAt.toISOString():null,is_active:true}).select().single();if(tokenError||!token){console.error(\"[ContractReadyTokenService] Token creation error:\",tokenError);throw new Error(\"Failed to create contract ready token\")}return token}__name(createContractReadyToken,\"createContractReadyToken\");async function getContractReadyTokenInfo(tokenId){const uuidRegex=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;if(!uuidRegex.test(tokenId.trim())){return null}console.log(\"[ContractReadyTokenService] Looking up token:\",tokenId.trim());const{data:tokenData,error:tokenError}=await supabase.from(\"contract_ready_tokens\").select(\"*\").eq(\"id\",tokenId.trim()).maybeSingle();if(tokenError){console.error(\"[ContractReadyTokenService] Error fetching token:\",tokenError);return null}if(!tokenData){console.warn(\"[ContractReadyTokenService] Token not found in database:\",tokenId.trim());return null}console.log(\"[ContractReadyTokenService] Token found:\",{id:tokenData.id,deal_id:tokenData.deal_id,is_active:tokenData.is_active,revoked_at:tokenData.revoked_at,expires_at:tokenData.expires_at});const isTokenInvalid=!tokenData.is_active||tokenData.revoked_at||tokenData.expires_at&&new Date(tokenData.expires_at)<new Date;if(isTokenInvalid){console.warn(\"[ContractReadyTokenService] Token is invalid:\",{id:tokenData.id,is_active:tokenData.is_active,revoked_at:tokenData.revoked_at,expires_at:tokenData.expires_at,deal_id:tokenData.deal_id});if(tokenData.deal_id){console.log(\"[ContractReadyTokenService] Looking for newer active token for deal:\",tokenData.deal_id);const{data:newerToken,error:newerTokenError}=await supabase.from(\"contract_ready_tokens\").select(\"id\").eq(\"deal_id\",tokenData.deal_id).eq(\"is_active\",true).is(\"revoked_at\",null).order(\"created_at\",{ascending:false}).limit(1).maybeSingle();if(!newerTokenError&&newerToken&&newerToken.id){console.log(\"[ContractReadyTokenService] Found newer active token:\",newerToken.id);return null}}return null}const token=tokenData;let deal=null;let creatorId=null;if(token.submission_id){console.log(\"[ContractReadyTokenService] Token has submission_id, fetching submission:\",token.submission_id);const{data:submission,error:submissionError}=await supabase.from(\"deal_details_submissions\").select(\"*, deal_details_tokens!inner(*)\").eq(\"id\",token.submission_id).maybeSingle();if(!submissionError&&submission&&submission.form_data){console.log(\"[ContractReadyTokenService] Found submission with submission_id\");const formData=submission.form_data;creatorId=submission.creator_id;const{data:creatorProfile,error:creatorProfileError}=await supabase.from(\"profiles\").select(\"first_name, last_name, location, business_name\").eq(\"id\",submission.creator_id).maybeSingle();if(creatorProfileError){console.warn(\"[ContractReadyTokenService] Error fetching creator profile from submission:\",creatorProfileError)}else if(!creatorProfile){console.warn(\"[ContractReadyTokenService] Creator profile not found for creator_id:\",submission.creator_id)}else{console.log(\"[ContractReadyTokenService] Found creator profile:\",{creatorId:submission.creator_id,firstName:creatorProfile.first_name,lastName:creatorProfile.last_name,businessName:creatorProfile.business_name,hasFirstName:!!creatorProfile.first_name,hasLastName:!!creatorProfile.last_name,hasBusinessName:!!creatorProfile.business_name,hasLocation:!!creatorProfile.location,hasAddress:!!creatorProfile.address,fullProfile:creatorProfile})}let creatorEmailFromAuth=null;try{const{data:authUser}=await supabase.auth.admin.getUserById(submission.creator_id);creatorEmailFromAuth=authUser?.user?.email||null;if(creatorEmailFromAuth){console.log(\"[ContractReadyTokenService] Found creator email from auth:\",creatorEmailFromAuth)}}catch(authError){console.warn(\"[ContractReadyTokenService] Could not fetch creator email from auth:\",authError)}deal={id:submission.deal_id||null,creator_id:submission.creator_id,brand_name:formData.brandName||\"Brand\",deal_amount:formData.dealType===\"paid\"&&formData.paymentAmount?parseFloat(formData.paymentAmount)||0:0,deliverables:JSON.stringify(formData.deliverables||[]),due_date:formData.deadline||new Date().toISOString().split(\"T\")[0],payment_expected_date:formData.deadline||new Date().toISOString().split(\"T\")[0],status:\"CONTRACT_READY\",platform:\"Other\",deal_type:formData.dealType||\"paid\",created_via:\"deal_details_form\",brand_address:formData.companyAddress||null,brand_email:formData.companyEmail||null,contract_file_url:null,contract_status:\"DraftGenerated\",contract_version:\"v3\",_creator_profile:creatorProfile,_creator_email:creatorEmailFromAuth}}}if(!deal&&token.deal_id){const{data:dealData,error:dealError}=await supabase.from(\"brand_deals\").select(\"*\").eq(\"id\",token.deal_id).maybeSingle();if(!dealError&&dealData){deal=dealData;creatorId=deal.creator_id}}if(!deal&&!token.submission_id){console.log(\"[ContractReadyTokenService] Deal not found and no submission_id, looking for submission data...\",{tokenId:tokenId.trim(),dealId:token.deal_id,createdBy:token.created_by,createdAt:token.created_at});if(token.created_by){if(token.created_by){console.log(\"[ContractReadyTokenService] Looking for submission for creator:\",token.created_by,\"created_at:\",token.created_at);const tokenCreatedAt=new Date(token.created_at);const oneHourBefore=new Date(tokenCreatedAt.getTime()-60*60*1e3);const oneHourAfter=new Date(tokenCreatedAt.getTime()+60*60*1e3);console.log(\"[ContractReadyTokenService] Searching submissions between:\",oneHourBefore.toISOString(),\"and\",oneHourAfter.toISOString());const{data:submissions,error:submissionsError}=await supabase.from(\"deal_details_submissions\").select(\"*, deal_details_tokens!inner(*)\").eq(\"creator_id\",token.created_by).is(\"deal_id\",null).gte(\"created_at\",oneHourBefore.toISOString()).lte(\"created_at\",oneHourAfter.toISOString()).order(\"created_at\",{ascending:false}).limit(5);if(submissionsError){console.error(\"[ContractReadyTokenService] Error fetching submissions:\",submissionsError)}else{console.log(\"[ContractReadyTokenService] Found\",submissions?.length||0,\"submissions in time window\")}let matchingSubmission=submissions&&submissions.length>0?submissions[0]:null;if(!matchingSubmission){console.log(\"[ContractReadyTokenService] No submissions in time window, trying most recent submission\");const{data:recentSubmission,error:recentError}=await supabase.from(\"deal_details_submissions\").select(\"*, deal_details_tokens!inner(*)\").eq(\"creator_id\",token.created_by).is(\"deal_id\",null).order(\"created_at\",{ascending:false}).limit(1).maybeSingle();if(recentError){console.error(\"[ContractReadyTokenService] Error fetching recent submission:\",recentError)}else{console.log(\"[ContractReadyTokenService] Found recent submission:\",recentSubmission?\"yes\":\"no\")}matchingSubmission=recentSubmission}if(matchingSubmission&&matchingSubmission.form_data){const formData=matchingSubmission.form_data;creatorId=matchingSubmission.creator_id;deal={id:null,creator_id:matchingSubmission.creator_id,brand_name:formData.brandName||\"Brand\",deal_amount:formData.dealType===\"paid\"&&formData.paymentAmount?parseFloat(formData.paymentAmount)||0:0,deliverables:JSON.stringify(formData.deliverables||[]),due_date:formData.deadline||new Date().toISOString().split(\"T\")[0],payment_expected_date:formData.deadline||new Date().toISOString().split(\"T\")[0],status:\"CONTRACT_READY\",platform:\"Other\",deal_type:formData.dealType||\"paid\",created_via:\"deal_details_form\",brand_address:formData.companyAddress||null,brand_email:formData.companyEmail||null,contract_file_url:null,contract_status:\"DraftGenerated\",contract_version:\"v3\"};console.log(\"[ContractReadyTokenService] Found submission data for token, created deal-like object\")}}}}if(!deal||!creatorId){console.warn(\"[ContractReadyTokenService] Could not find deal or submission data for token:\",tokenId.trim());return null}creatorId=creatorId||deal.creator_id;let creator=null;let creatorEmail=null;if(deal._creator_profile){creator=deal._creator_profile;creatorEmail=deal._creator_email||null;delete deal._creator_profile;delete deal._creator_email}else{console.log(\"[ContractReadyTokenService] Fetching creator profile for creatorId:\",creatorId);const{data:creatorData,error:creatorError}=await supabase.from(\"profiles\").select(\"first_name, last_name, location, business_name\").eq(\"id\",creatorId).maybeSingle();if(creatorError){console.error(\"[ContractReadyTokenService] Error fetching creator profile:\",{error:creatorError,creatorId,errorMessage:creatorError.message,errorCode:creatorError.code});creator=null}else if(!creatorData){console.warn(\"[ContractReadyTokenService] Creator profile not found for creatorId:\",creatorId);creator=null}else{creator=creatorData;console.log(\"[ContractReadyTokenService] Successfully fetched creator profile:\",{creatorId,hasFirstName:!!creatorData.first_name,hasLastName:!!creatorData.last_name,firstName:creatorData.first_name,lastName:creatorData.last_name,hasLocation:!!creatorData.location,location:creatorData.location,businessName:creatorData.business_name})}try{const{data:authUser}=await supabase.auth.admin.getUserById(creatorId);creatorEmail=authUser?.user?.email||null;console.log(\"[ContractReadyTokenService] Fetched creator email from auth:\",creatorEmail)}catch(authError){console.warn(\"[ContractReadyTokenService] Could not fetch creator email from auth:\",authError)}}const creatorAny=creator;let creatorName=null;if(creator){if(creatorAny.business_name&&creatorAny.business_name.trim()){creatorName=creatorAny.business_name.trim()}else{const firstName=(creator.first_name||\"\").trim();const lastName=(creator.last_name||\"\").trim();if(firstName&&lastName){creatorName=`${firstName} ${lastName}`.trim()}else if(firstName){creatorName=firstName}else if(lastName){creatorName=lastName}}}if(!creatorName||creatorName===\"\"){creatorName=null}console.log(\"[ContractReadyTokenService] Constructed creator name:\",{finalName:creatorName,hadCreator:!!creator,creatorType:typeof creator,creatorKeys:creator?Object.keys(creator):[],hadFirstName:!!creator?.first_name,hadLastName:!!creator?.last_name,hadBusinessName:!!creatorAny?.business_name,firstName:creator?.first_name,lastName:creator?.last_name,firstNameType:typeof creator?.first_name,lastNameType:typeof creator?.last_name,firstNameValue:creator?.first_name,lastNameValue:creator?.last_name,businessName:creatorAny?.business_name,fullCreatorObject:JSON.stringify(creator)});let creatorAddress=creator?creatorAny.location||null:null;if(creatorAddress&&typeof creatorAddress===\"string\"){creatorAddress=creatorAddress.trim();creatorAddress=creatorAddress.replace(/,\\s*$/,\"\").trim();if(creatorAddress===\"\"||creatorAddress===\"null\"||creatorAddress===\"undefined\"){creatorAddress=null}}console.log(\"[ContractReadyTokenService] Address extraction:\",{hasCreator:!!creator,locationValue:creatorAny?.location,finalAddress:creatorAddress,locationType:typeof creatorAny?.location,locationLength:creatorAny?.location?.length});console.log(\"[ContractReadyTokenService] Returning creator data:\",{creatorId,creatorName,creatorEmail,creatorAddress,hasCreatorProfile:!!creator,creatorProfileData:creator?{first_name:creator.first_name,last_name:creator.last_name,location:creatorAny.location,address:creatorAny.address,locationType:typeof creatorAny.location,addressType:typeof creatorAny.address,locationValue:creatorAny.location,addressValue:creatorAny.address}:null});return{token:{id:token.id,deal_id:token.deal_id,submission_id:token.submission_id||null,created_at:token.created_at,created_by:token.created_by,expires_at:token.expires_at,is_active:token.is_active,revoked_at:token.revoked_at},deal,creatorName,creatorEmail,creatorAddress}}__name(getContractReadyTokenInfo,\"getContractReadyTokenInfo\");export{createContractReadyToken,getContractReadyTokenInfo};\n","warnings":[],"map":{"version":3,"mappings":"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","names":[],"ignoreList":[],"sources":["/Users/pratyushraj/Documents/noticebazaar/server/src/services/contractReadyTokenService.ts"],"sourcesContent":[null]}}