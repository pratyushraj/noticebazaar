{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});async function sendLawyerComplaintNotification(email,complaintData){try{const apiKey=process.env.RESEND_API_KEY;if(!apiKey||apiKey===\"your_resend_api_key_here\"||apiKey.trim()===\"\"){console.warn(\"[LawyerNotification] Resend API key not configured, skipping email\");return{success:false,error:\"Email API key not configured\"}}const emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;if(!emailRegex.test(email)){return{success:false,error:\"Invalid email address format\"}}const url=\"https://api.resend.com/emails\";const dashboardUrl=process.env.FRONTEND_URL||\"https://creatorarmour.com\";const complaintLink=`${dashboardUrl}/lawyer/consumer-complaints`;const emailSubject=\"New Consumer Complaint Needs Review\";const emailHtml=`\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset=\"utf-8\">\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        </head>\n        <body style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;\">\n          <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; border-radius: 10px 10px 0 0; text-align: center;\">\n            <h1 style=\"color: white; margin: 0; font-size: 24px;\">CreatorArmour</h1>\n          </div>\n          <div style=\"background: #f9fafb; padding: 30px; border-radius: 0 0 10px 10px; border: 1px solid #e5e7eb; border-top: none;\">\n            <h2 style=\"color: #1f2937; margin-top: 0; font-size: 20px;\">New Consumer Complaint Needs Review</h2>\n            <p style=\"color: #4b5563; font-size: 16px;\">\n              A new consumer complaint has been submitted and requires lawyer review.\n            </p>\n            <div style=\"background: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px; margin: 20px 0;\">\n              <table style=\"width: 100%; border-collapse: collapse;\">\n                <tr>\n                  <td style=\"padding: 8px 0; color: #6b7280; font-size: 14px; width: 40%;\"><strong>Company:</strong></td>\n                  <td style=\"padding: 8px 0; color: #1f2937; font-size: 14px;\">${complaintData.companyName}</td>\n                </tr>\n                <tr>\n                  <td style=\"padding: 8px 0; color: #6b7280; font-size: 14px;\"><strong>Category:</strong></td>\n                  <td style=\"padding: 8px 0; color: #1f2937; font-size: 14px;\">${complaintData.categoryName||complaintData.category}</td>\n                </tr>\n              </table>\n            </div>\n            <div style=\"text-align: center; margin: 30px 0;\">\n              <a href=\"${complaintLink}\" style=\"display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: 600;\">\n                View in Dashboard\n              </a>\n            </div>\n            <div style=\"margin-top: 30px; padding-top: 20px; border-top: 1px solid #e5e7eb;\">\n              <p style=\"color: #9ca3af; font-size: 12px; margin: 0;\">\n                This is an automated notification from CreatorArmour. Please do not reply to this email.\n              </p>\n            </div>\n          </div>\n        </body>\n      </html>\n    `;const requestBody={from:\"CreatorArmour <noreply@creatorarmour.com>\",to:email,subject:emailSubject,html:emailHtml};const response=await fetch(url,{method:\"POST\",headers:{\"Authorization\":`Bearer ${apiKey}`,\"Content-Type\":\"application/json\"},body:JSON.stringify(requestBody)});if(!response.ok){const errorText=await response.text().catch(()=>\"\");console.error(\"[LawyerNotification] Resend API error:\",response.status,errorText);return{success:false,error:`Email service error: ${response.status}`}}const result=await response.json();if(result.error){console.error(\"[LawyerNotification] Resend API returned error:\",result.error);return{success:false,error:result.error.message||\"Unknown email error\"}}console.log(\"[LawyerNotification] Email sent successfully to:\",email);return{success:true}}catch(error){console.error(\"[LawyerNotification] Error sending email:\",error);return{success:false,error:error.message||\"Failed to send email\"}}}__name(sendLawyerComplaintNotification,\"sendLawyerComplaintNotification\");export{sendLawyerComplaintNotification};\n","warnings":[],"map":{"version":3,"mappings":"kHAiBA,eAAsB,gCACpB,MACA,cAM+C,CAC/C,GAAI,CACF,MAAM,OAAS,QAAQ,IAAI,eAE3B,GAAI,CAAC,QAAU,SAAW,4BAA8B,OAAO,KAAK,IAAM,GAAI,CAC5E,QAAQ,KAAK,oEAAoE,EACjF,MAAO,CACL,QAAS,MACT,MAAO,8BACT,CACF,CAGA,MAAM,WAAa,6BACnB,GAAI,CAAC,WAAW,KAAK,KAAK,EAAG,CAC3B,MAAO,CACL,QAAS,MACT,MAAO,8BACT,CACF,CAEA,MAAM,IAAM,gCACZ,MAAM,aAAe,QAAQ,IAAI,cAAgB,4BACjD,MAAM,cAAgB,GAAG,YAAY,8BAErC,MAAM,aAAe,sCACrB,MAAM,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iFAoB2D,cAAc,WAAW;AAAA;AAAA;AAAA;AAAA,iFAIzB,cAAc,cAAgB,cAAc,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,yBAK5G,aAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAclC,MAAM,YAAc,CAClB,KAAM,4CACN,GAAI,MACJ,QAAS,aACT,KAAM,SACR,EAEA,MAAM,SAAW,MAAM,MAAM,IAAK,CAChC,OAAQ,OACR,QAAS,CACP,gBAAiB,UAAU,MAAM,GACjC,eAAgB,kBAClB,EACA,KAAM,KAAK,UAAU,WAAW,CAClC,CAAC,EAED,GAAI,CAAC,SAAS,GAAI,CAChB,MAAM,UAAY,MAAM,SAAS,KAAK,EAAE,MAAM,IAAM,EAAE,EACtD,QAAQ,MAAM,yCAA0C,SAAS,OAAQ,SAAS,EAClF,MAAO,CACL,QAAS,MACT,MAAO,wBAAwB,SAAS,MAAM,EAChD,CACF,CAEA,MAAM,OAA8B,MAAM,SAAS,KAAK,EAExD,GAAI,OAAO,MAAO,CAChB,QAAQ,MAAM,kDAAmD,OAAO,KAAK,EAC7E,MAAO,CACL,QAAS,MACT,MAAO,OAAO,MAAM,SAAW,qBACjC,CACF,CAEA,QAAQ,IAAI,mDAAoD,KAAK,EACrE,MAAO,CAAE,QAAS,IAAK,CACzB,OAAS,MAAY,CACnB,QAAQ,MAAM,4CAA6C,KAAK,EAChE,MAAO,CACL,QAAS,MACT,MAAO,MAAM,SAAW,sBAC1B,CACF,CACF,CAzHsB","names":[],"ignoreList":[],"sources":["/Users/pratyushraj/Documents/noticebazaar/server/src/services/lawyerNotificationService.ts"],"sourcesContent":[null]}}