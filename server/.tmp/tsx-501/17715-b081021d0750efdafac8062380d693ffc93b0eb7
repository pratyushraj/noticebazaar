{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});import\"./loadEnv.js\";import express from\"express\";import cors from\"cors\";import helmet from\"helmet\";import conversationsRouter from\"./routes/conversations.js\";import messagesRouter from\"./routes/messages.js\";import attachmentsRouter from\"./routes/attachments.js\";import paymentsRouter from\"./routes/payments.js\";import protectionRouter,{viewContractHandler,downloadContractDocxHandler}from\"./routes/protection.js\";import adminRouter from\"./routes/admin.js\";import brandResponseRouter from\"./routes/brandResponse.js\";import brandReplyTokensRouter from\"./routes/brandReplyTokens.js\";import dealDetailsTokensRouter from\"./routes/dealDetailsTokens.js\";import contractReadyTokensRouter from\"./routes/contractReadyTokens.js\";import gstRouter from\"./routes/gst.js\";import aiRouter from\"./routes/ai.js\";import esignRouter from\"./routes/esign.js\";import dealsRouter from\"./routes/deals.js\";import complaintsRouter from\"./routes/complaints.js\";import influencersRouter from\"./routes/influencers.js\";import collabRequestsRouter from\"./routes/collabRequests.js\";import collabAnalyticsRouter from\"./routes/collabAnalytics.js\";import collabActionRouter from\"./routes/collabAction.js\";import creatorsRouter from\"./routes/creators.js\";import shippingRouter from\"./routes/shipping.js\";import cronDealRemindersRouter from\"./routes/cronDealReminders.js\";import cronInstagramSyncRouter from\"./routes/cronInstagramSync.js\";import creatorSignRouter from\"./routes/creatorSign.js\";import otpRouter from\"./routes/otp.js\";import contractsRouter from\"./routes/contracts.js\";import feedbackRouter from\"./routes/feedback.js\";import profileRouter from\"./routes/profile.js\";import instagramOAuthRouter from\"./routes/instagramOAuth.js\";import{sendCollabRequestAcceptedEmail,sendCollabRequestCreatorNotificationEmail}from\"./services/collabRequestEmailService.js\";import{createContractReadyToken}from\"./services/contractReadyTokenService.js\";console.log(\"[Server] Influencers router imported:\",typeof influencersRouter,influencersRouter?\"\\u2713\":\"\\u2717\");import{authMiddleware}from\"./middleware/auth.js\";import{rateLimitMiddleware}from\"./middleware/rateLimit.js\";import{errorHandler}from\"./middleware/errorHandler.js\";const app=express();const PORT=process.env.PORT||3001;import{supabase,supabaseInitialized,supabaseConfig}from\"./lib/supabase.js\";if(supabaseInitialized&&supabaseConfig.serviceKey&&supabaseConfig.serviceKey.length>50){console.log(\"\\u2705 Supabase client initialized with service role key (length:\",supabaseConfig.serviceKey.length,\")\")}else if(supabaseInitialized){console.warn(\"\\u26A0\\uFE0F Supabase client may not be using service role key. Key length:\",supabaseConfig.serviceKey?.length||0)}app.use(helmet({contentSecurityPolicy:false}));const corsOptions={origin:__name(function(origin,callback){if(!origin){console.log(\"[CORS] Allowing request with no origin\");return callback(null,true)}console.log(\"[CORS] Checking origin:\",origin);const normalizedOrigin=origin.toLowerCase().trim();if(normalizedOrigin.startsWith(\"http://localhost:\")||normalizedOrigin.startsWith(\"http://127.0.0.1:\")||normalizedOrigin.startsWith(\"https://localhost:\")||normalizedOrigin.startsWith(\"https://127.0.0.1:\")||/^https?:\\/\\/192\\.168\\./.test(normalizedOrigin)||/^https?:\\/\\/172\\.(1[6-9]|2[0-9]|3[0-1])\\./.test(normalizedOrigin)||/^https?:\\/\\/10\\./.test(normalizedOrigin)){console.log(\"[CORS] \\u2713 Allowing localhost or local network origin:\",origin);return callback(null,true)}if(normalizedOrigin.includes(\"onrender.com\")){console.log(\"[CORS] \\u2713 Allowing Render origin:\",origin);return callback(null,true)}if(normalizedOrigin.includes(\"vercel.app\")){console.log(\"[CORS] \\u2713 Allowing Vercel origin:\",origin);return callback(null,true)}if(normalizedOrigin.includes(\"netlify.app\")){console.log(\"[CORS] \\u2713 Allowing Netlify origin:\",origin);return callback(null,true)}if(normalizedOrigin.includes(\"trycloudflare.com\")||normalizedOrigin.includes(\"creatorarmour.com\")){console.log(\"[CORS] \\u2713 Allowing cloudflared/creatorarmour origin:\",origin);return callback(null,true)}const allowedOrigins=[\"http://localhost:8080\",\"http://localhost:8084\",\"http://localhost:5173\",\"http://127.0.0.1:8080\",\"http://127.0.0.1:8084\",\"http://127.0.0.1:5173\",\"https://www.creatorarmour.com\",\"https://creatorarmour.com\",\"https://api.creatorarmour.com\"].map(o=>o.toLowerCase());if(allowedOrigins.includes(normalizedOrigin)){console.log(\"[CORS] \\u2713 Allowing origin from allowed list:\",origin);return callback(null,true)}console.warn(\"[CORS] \\u2717 Blocking origin:\",origin);callback(new Error(`CORS: Origin ${origin} not allowed`))},\"origin\"),credentials:true,methods:[\"GET\",\"POST\",\"PUT\",\"DELETE\",\"OPTIONS\",\"PATCH\"],allowedHeaders:[\"Content-Type\",\"Authorization\",\"X-Requested-With\",\"Accept\"],exposedHeaders:[\"Content-Length\",\"Content-Type\"],preflightContinue:false,optionsSuccessStatus:204};app.use(cors(corsOptions));app.options(\"*\",cors(corsOptions));app.use((req,res,next)=>{console.log(`[Request] ${req.method} ${req.path}`,{origin:req.headers.origin,\"user-agent\":req.headers[\"user-agent\"]?.substring(0,50)});next()});app.use(express.json({limit:\"10mb\"}));app.use(express.urlencoded({extended:true,limit:\"10mb\"}));app.get(\"/\",(req,res)=>{res.json({name:\"CreatorArmour API\",version:\"1.0.0\",status:\"running\",endpoints:{health:\"/health\",api:\"/api/*\"},documentation:\"See API documentation for available endpoints\"})});app.get(\"/health\",(req,res)=>{try{const llmProvider=process.env.LLM_PROVIDER||\"huggingface\";const llmModel=process.env.LLM_MODEL||\"not set\";const hasLLMKey=!!process.env.LLM_API_KEY;res.json({status:\"ok\",timestamp:new Date().toISOString(),supabaseInitialized,nodeEnv:process.env.NODE_ENV||\"not set\",llm:{provider:llmProvider,model:llmModel,apiKeyConfigured:hasLLMKey,status:hasLLMKey||llmProvider===\"huggingface\"?\"configured\":\"missing_api_key\"}})}catch(error){console.error(\"Health check error:\",error);res.status(200).json({status:\"error\",message:error.message||\"Unknown error\",timestamp:new Date().toISOString()})}});app.use(\"/api/brand-response\",brandResponseRouter);app.use(\"/api/deal-details-tokens\",dealDetailsTokensRouter);app.use(\"/api/contract-ready-tokens\",contractReadyTokensRouter);app.use(\"/api/creator-sign\",creatorSignRouter);app.use(\"/api/gst\",gstRouter);app.use(\"/api/otp\",rateLimitMiddleware,otpRouter);app.use(\"/api/collab-requests\",authMiddleware,rateLimitMiddleware,collabRequestsRouter);app.use(\"/api/collab-analytics\",collabAnalyticsRouter);app.use(\"/api/collab\",collabRequestsRouter);app.use(\"/api/collab-action\",collabActionRouter);app.use(\"/api/creators\",creatorsRouter);app.use(\"/api/shipping\",shippingRouter);app.use(\"/api/cron\",cronDealRemindersRouter);app.use(\"/api/cron\",cronInstagramSyncRouter);app.use(\"/api/contracts\",contractsRouter);app.use(\"/api/instagram\",instagramOAuthRouter);app.get(\"/api/protection/contracts/:dealId/view\",viewContractHandler);app.get(\"/api/protection/contracts/:dealId/download-docx\",downloadContractDocxHandler);app.use(\"/api/brand-reply-tokens\",authMiddleware,rateLimitMiddleware,brandReplyTokensRouter);app.use(\"/api/esign\",authMiddleware,rateLimitMiddleware,esignRouter);app.use(\"/api/conversations\",authMiddleware,rateLimitMiddleware,conversationsRouter);app.use(\"/api/conversations\",authMiddleware,rateLimitMiddleware,messagesRouter);app.use(\"/api/conversations\",authMiddleware,rateLimitMiddleware,attachmentsRouter);app.use(\"/api/payments\",authMiddleware,rateLimitMiddleware,paymentsRouter);app.use(\"/api/protection\",authMiddleware,rateLimitMiddleware,protectionRouter);app.use(\"/api/admin\",authMiddleware,adminRouter);app.use(\"/api/ai\",authMiddleware,rateLimitMiddleware,aiRouter);app.use(\"/api/deals\",authMiddleware,rateLimitMiddleware,dealsRouter);app.use(\"/api/complaints\",authMiddleware,rateLimitMiddleware,complaintsRouter);app.use(\"/api/influencers\",authMiddleware,rateLimitMiddleware,influencersRouter);app.use(\"/api/feedback\",feedbackRouter);app.use(\"/api/profile\",authMiddleware,rateLimitMiddleware,profileRouter);app.post(\"/api/demo-email/barter-accepted\",async(req,res)=>{if(process.env.ALLOW_DEMO_EMAIL!==\"true\"){return res.status(404).json({success:false,error:\"Not found\"})}const to=(req.body?.to||\"notice@yopmail.com\").trim().toLowerCase();if(!to.endsWith(\"@yopmail.com\")){return res.status(400).json({success:false,error:\"Demo emails only allowed to *@yopmail.com\"})}try{const result=await sendCollabRequestAcceptedEmail(to,{creatorName:\"Demo Creator\",brandName:\"Demo Brand\",dealType:\"barter\",deliverables:[\"1 Instagram Reel\",\"1 Story\",\"Usage Rights: 90 days\"],contractReadyToken:\"demo-token-for-preview\",contractUrl:void 0,barterValue:999});if(result.success){return res.json({success:true,emailId:result.emailId,to})}return res.status(500).json({success:false,error:result.error})}catch(e){return res.status(500).json({success:false,error:e?.message||\"Failed to send\"})}});app.post(\"/api/demo-email/creator-barter\",async(req,res)=>{if(process.env.ALLOW_DEMO_EMAIL!==\"true\"){return res.status(404).json({success:false,error:\"Not found\"})}const to=(req.body?.to||\"notice@yopmail.com\").trim().toLowerCase();if(!to.endsWith(\"@yopmail.com\")){return res.status(400).json({success:false,error:\"Demo emails only allowed to *@yopmail.com\"})}try{const barterProductSvg='<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"120\" height=\"120\"><rect fill=\"#e2e8f0\" width=\"120\" height=\"120\" rx=\"10\"/><text x=\"50%\" y=\"50%\" dominant-baseline=\"middle\" text-anchor=\"middle\" fill=\"#64748b\" font-family=\"Arial,sans-serif\" font-size=\"14\">Product</text></svg>';const barterProductImageUrl=\"data:image/svg+xml,\"+encodeURIComponent(barterProductSvg);const result=await sendCollabRequestCreatorNotificationEmail(to,{creatorName:\"Demo Creator\",brandName:\"Demo Brand\",collabType:\"barter\",deliverables:[\"1 Instagram Reel\",\"1 Story\",\"Usage Rights: 90 days\"],requestId:\"demo-request-barter\",barterValue:999,barterDescription:\"Skincare product bundle\",barterProductImageUrl,deadline:new Date(Date.now()+21*24*60*60*1e3).toISOString()});if(result.success){return res.json({success:true,emailId:result.emailId,to})}return res.status(500).json({success:false,error:result.error})}catch(e){return res.status(500).json({success:false,error:e?.message||\"Failed to send\"})}});app.post(\"/api/demo-email/paid-accepted\",async(req,res)=>{if(process.env.ALLOW_DEMO_EMAIL!==\"true\"){return res.status(404).json({success:false,error:\"Not found\"})}const to=(req.body?.to||\"notice@yopmail.com\").trim().toLowerCase();if(!to.endsWith(\"@yopmail.com\")){return res.status(400).json({success:false,error:\"Demo emails only allowed to *@yopmail.com\"})}try{const result=await sendCollabRequestAcceptedEmail(to,{creatorName:\"Demo Creator\",brandName:\"Demo Brand\",dealType:\"paid\",dealAmount:15e3,deliverables:[\"1 Instagram Reel\",\"2 Stories\",\"Usage Rights: 90 days\"],contractReadyToken:\"demo-token-paid-preview\",contractUrl:void 0});if(result.success){return res.json({success:true,emailId:result.emailId,to})}return res.status(500).json({success:false,error:result.error})}catch(e){return res.status(500).json({success:false,error:e?.message||\"Failed to send\"})}});app.post(\"/api/demo-email/send-brand-contract-for-deal\",async(req,res)=>{if(process.env.ALLOW_DEMO_EMAIL!==\"true\"){return res.status(404).json({success:false,error:\"Not found\"})}const dealId=(req.body?.dealId||\"\").trim();const to=(req.body?.to||\"notice@yopmail.com\").trim().toLowerCase();if(!dealId){return res.status(400).json({success:false,error:\"dealId is required\"})}if(!to.endsWith(\"@yopmail.com\")){return res.status(400).json({success:false,error:\"Demo emails only allowed to *@yopmail.com\"})}try{const{data:deal,error:dealError}=await supabase.from(\"brand_deals\").select(\"id, creator_id, brand_name, brand_email, deal_type, deal_amount, deliverables\").eq(\"id\",dealId).maybeSingle();if(dealError||!deal){return res.status(404).json({success:false,error:\"Deal not found\"})}const{data:profile}=await supabase.from(\"profiles\").select(\"first_name, last_name\").eq(\"id\",deal.creator_id).maybeSingle();const creatorName=profile?`${(profile.first_name||\"\").trim()} ${(profile.last_name||\"\").trim()}`.trim()||\"Creator\":\"Creator\";let deliverablesArray=[];try{const d=deal.deliverables;deliverablesArray=typeof d===\"string\"?d.includes(\"[\")?JSON.parse(d):d.split(\",\").map(s=>s.trim()):Array.isArray(d)?d:[]}catch{deliverablesArray=[deal.deliverables].filter(Boolean)}if(deliverablesArray.length===0)deliverablesArray=[\"As per agreement\"];const token=await createContractReadyToken({dealId:deal.id,creatorId:deal.creator_id,expiresAt:null});const dealType=deal.deal_type===\"barter\"?\"barter\":\"paid\";const result=await sendCollabRequestAcceptedEmail(to,{creatorName,brandName:deal.brand_name||\"Brand\",dealType,dealAmount:dealType===\"paid\"?deal.deal_amount:void 0,barterValue:dealType===\"barter\"?deal.deal_amount:void 0,deliverables:deliverablesArray,contractReadyToken:token.id,contractUrl:void 0});if(result.success){return res.json({success:true,emailId:result.emailId,to,contractReadyToken:token.id,contractReadyUrl:`${process.env.FRONTEND_URL||\"http://localhost:8080\"}/contract-ready/${token.id}`})}return res.status(500).json({success:false,error:result.error})}catch(e){return res.status(500).json({success:false,error:e?.message||\"Failed to send\"})}});app.use(errorHandler);app.use(\"/api/*\",(req,res)=>{res.status(404).json({success:false,error:`API endpoint not found: ${req.method} ${req.originalUrl||req.path}`,path:req.path,originalUrl:req.originalUrl,baseUrl:req.baseUrl})});app.use(errorHandler);var src_default=app;async function checkPuppeteerAvailability(){try{const puppeteerCore=(await import(\"puppeteer-core\").then(s=>{const e=\"default\";return s[e]&&typeof s[e]==\"object\"&&\"__esModule\"in s[e]?s[e]:s})).default;const executablePath=process.env.PUPPETEER_EXECUTABLE_PATH;if(!executablePath){console.warn(\"\\u26A0\\uFE0F Puppeteer availability check skipped (PUPPETEER_EXECUTABLE_PATH not set)\");return}const browser=await puppeteerCore.launch({executablePath,headless:\"new\",args:[\"--no-sandbox\",\"--disable-setuid-sandbox\",\"--disable-dev-shm-usage\",\"--disable-gpu\",\"--single-process\"],timeout:1e4});await browser.close();console.log(\"\\u2705 Puppeteer/Chrome is available for contract PDF generation\")}catch(error){console.error(\"\\u274C FATAL: Puppeteer/Chrome is NOT available!\");console.error(\"   Contract PDF generation will FAIL.\");console.error(\"   Error:\",error.message);console.error(\"\");if(error.message?.includes(\"Could not find Chrome\")){console.error(\"   Chrome is not installed. To fix this, run:\");console.error(\"   cd server && npx puppeteer browsers install chrome\")}else if(error.message?.includes(\"Failed to launch\")){console.error(\"   Chrome is installed but failing to launch.\");console.error(\"   This may be a macOS compatibility issue.\");console.error(\"   Try: cd server && npx puppeteer browsers install chrome@latest\");console.error(\"   Or check Chrome binary permissions.\")}else{console.error(\"   To fix this, run:\");console.error(\"   cd server && npx puppeteer browsers install chrome\")}console.error(\"\");console.error(\"   Or set PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=false in your environment.\");console.error(\"\")}}__name(checkPuppeteerAvailability,\"checkPuppeteerAvailability\");let server=null;if(process.env.VERCEL!==\"1\"&&!process.env.NOW_REGION){server=app.listen(PORT,async()=>{console.log(`\\u{1F680} CreatorArmour API server running on port ${PORT}`);await checkPuppeteerAvailability();try{const{setupDailyScheduler}=await import(\"./services/influencerScheduler.js\").then(s=>{const e=\"default\";return s[e]&&typeof s[e]==\"object\"&&\"__esModule\"in s[e]?s[e]:s});setupDailyScheduler()}catch(error){console.warn(\"\\u26A0\\uFE0F Could not setup influencer scheduler:\",error.message)}});const gracefulShutdown=__name(signal=>{console.log(`\n${signal} received. Closing server gracefully...`);if(server){server.close(()=>{console.log(\"Server closed.\");process.exit(0)});setTimeout(()=>{console.log(\"Forcing server shutdown...\");process.exit(1)},5e3)}else{process.exit(0)}},\"gracefulShutdown\");process.on(\"SIGTERM\",()=>gracefulShutdown(\"SIGTERM\"));process.on(\"SIGINT\",()=>gracefulShutdown(\"SIGINT\"));process.on(\"uncaughtException\",error=>{console.error(\"Uncaught Exception:\",error);gracefulShutdown(\"uncaughtException\")});process.on(\"unhandledRejection\",(reason,promise)=>{console.error(\"Unhandled Rejection at:\",promise,\"reason:\",reason);gracefulShutdown(\"unhandledRejection\")})}export{src_default as default,supabase,supabaseConfig,supabaseInitialized};\n","warnings":[],"map":{"version":3,"mappings":"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","names":[],"ignoreList":[],"sources":["/Users/pratyushraj/Documents/noticebazaar/server/src/index.ts"],"sourcesContent":[null]}}