{"code":"import{Router}from\"express\";import{syncInstagramStats}from\"../jobs/instagramSync.js\";const router=Router();router.post(\"/instagram-sync\",async(req,res)=>{try{const secret=process.env.CRON_SECRET||process.env.DEAL_REMINDERS_CRON_SECRET;const authHeader=req.headers.authorization;const headerSecret=authHeader?.startsWith(\"Bearer \")?authHeader.slice(7):null;const cronSecret=headerSecret||req.headers[\"x-cron-secret\"]||null;if(secret&&cronSecret!==secret){return res.status(401).json({success:false,error:\"Unauthorized\"})}const result=await syncInstagramStats();return res.json({success:true,...result})}catch(error){console.error(\"[CronInstagramSync] error:\",error);return res.status(500).json({success:false,error:error?.message||\"Sync failed\"})}});var cronInstagramSync_default=router;export{cronInstagramSync_default as default};\n","warnings":[],"map":{"version":3,"mappings":"AAAA,OAAS,WAAiC,UAC1C,OAAS,uBAA0B,2BAEnC,MAAM,OAAS,OAAO,EAItB,OAAO,KAAK,kBAAmB,MAAO,IAAc,MAAkB,CACpE,GAAI,CACF,MAAM,OAAS,QAAQ,IAAI,aAAe,QAAQ,IAAI,2BACtD,MAAM,WAAa,IAAI,QAAQ,cAC/B,MAAM,aAAe,YAAY,WAAW,SAAS,EAAI,WAAW,MAAM,CAAC,EAAI,KAC/E,MAAM,WAAa,cAAiB,IAAI,QAAQ,eAAe,GAAgB,KAE/E,GAAI,QAAU,aAAe,OAAQ,CACnC,OAAO,IAAI,OAAO,GAAG,EAAE,KAAK,CAAE,QAAS,MAAO,MAAO,cAAe,CAAC,CACvE,CAEA,MAAM,OAAS,MAAM,mBAAmB,EACxC,OAAO,IAAI,KAAK,CAAE,QAAS,KAAM,GAAG,MAAO,CAAC,CAC9C,OAAS,MAAY,CACnB,QAAQ,MAAM,6BAA8B,KAAK,EACjD,OAAO,IAAI,OAAO,GAAG,EAAE,KAAK,CAAE,QAAS,MAAO,MAAO,OAAO,SAAW,aAAc,CAAC,CACxF,CACF,CAAC,EAED,IAAO,0BAAQ","names":[],"ignoreList":[],"sources":["/Users/pratyushraj/Documents/noticebazaar/server/src/routes/cronInstagramSync.ts"],"sourcesContent":[null]}}