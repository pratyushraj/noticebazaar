{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});import{supabase}from\"../lib/supabase.js\";const BUCKET_NAME=process.env.STORAGE_BUCKET||\"creator-assets\";async function generateSignedUploadUrl(path,contentType){const{data,error}=await supabase.storage.from(BUCKET_NAME).createSignedUploadUrl(path,{upsert:false});if(error)throw new Error(`Failed to generate upload URL: ${error.message}`);return{signedUrl:data.signedUrl,path}}__name(generateSignedUploadUrl,\"generateSignedUploadUrl\");async function generateSignedDownloadUrl(path,expiresIn=3600){const{data,error}=await supabase.storage.from(BUCKET_NAME).createSignedUrl(path,expiresIn);if(error)throw new Error(`Failed to generate download URL: ${error.message}`);return data.signedUrl}__name(generateSignedDownloadUrl,\"generateSignedDownloadUrl\");async function uploadFileSecure(path,file,contentType){const{error}=await supabase.storage.from(BUCKET_NAME).upload(path,file,{contentType,upsert:false});if(error)throw new Error(`Failed to upload file: ${error.message}`);return{path,bucket:BUCKET_NAME}}__name(uploadFileSecure,\"uploadFileSecure\");function extractPathFromPublicUrl(publicUrl){if(!publicUrl)return null;try{const match=publicUrl.match(/\\/storage\\/v1\\/object\\/public\\/[^/]+\\/(.+)$/);return match?match[1]:null}catch{return null}}__name(extractPathFromPublicUrl,\"extractPathFromPublicUrl\");export{extractPathFromPublicUrl,generateSignedDownloadUrl,generateSignedUploadUrl,uploadFileSecure};\n","warnings":[],"map":{"version":3,"mappings":"kHAGA,OAAS,aAAgB,qBAEzB,MAAM,YAAc,QAAQ,IAAI,gBAAkB,iBAElD,eAAsB,wBACpB,KACA,YAC8C,CAC9C,KAAM,CAAE,KAAM,KAAM,EAAI,MAAM,SAAS,QACpC,KAAK,WAAW,EAChB,sBAAsB,KAAM,CAC3B,OAAQ,KACV,CAAC,EAEH,GAAI,MAAO,MAAM,IAAI,MAAM,kCAAkC,MAAM,OAAO,EAAE,EAE5E,MAAO,CACL,UAAW,KAAK,UAChB,IACF,CACF,CAhBsB,0DAkBtB,eAAsB,0BACpB,KACA,UAAoB,KACH,CACjB,KAAM,CAAE,KAAM,KAAM,EAAI,MAAM,SAAS,QACpC,KAAK,WAAW,EAChB,gBAAgB,KAAM,SAAS,EAElC,GAAI,MAAO,MAAM,IAAI,MAAM,oCAAoC,MAAM,OAAO,EAAE,EAE9E,OAAO,KAAK,SACd,CAXsB,8DAiBtB,eAAsB,iBACpB,KACA,KACA,YAC2C,CAC3C,KAAM,CAAE,KAAM,EAAI,MAAM,SAAS,QAC9B,KAAK,WAAW,EAChB,OAAO,KAAM,KAAM,CAClB,YACA,OAAQ,KACV,CAAC,EAEH,GAAI,MAAO,MAAM,IAAI,MAAM,0BAA0B,MAAM,OAAO,EAAE,EAEpE,MAAO,CACL,KACA,OAAQ,WACV,CACF,CAlBsB,4CAyBf,SAAS,yBAAyB,UAAkC,CACzE,GAAI,CAAC,UAAW,OAAO,KAEvB,GAAI,CACF,MAAM,MAAQ,UAAU,MAAM,6CAA6C,EAC3E,OAAO,MAAQ,MAAM,CAAC,EAAI,IAC5B,MAAQ,CACN,OAAO,IACT,CACF,CATgB","names":[],"ignoreList":[],"sources":["/Users/pratyushraj/Documents/noticebazaar/server/src/services/storage.ts"],"sourcesContent":[null]}}