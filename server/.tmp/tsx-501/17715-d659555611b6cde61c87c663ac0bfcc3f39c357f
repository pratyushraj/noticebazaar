{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});import{getCTATrustLine,getEmailLayout,getEmailProgressCue,getEmailSignal,getPrimaryCTA}from\"./professionalEmailTemplates.js\";const SUPPORT_EMAIL=\"support@creatorarmour.com\";async function sendEmail(to,subject,html){try{const apiKey=process.env.RESEND_API_KEY;if(!apiKey||apiKey===\"your_resend_api_key_here\"||apiKey.trim()===\"\"){return{success:false,error:\"Resend API key is not configured\"}}if(!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(to)){return{success:false,error:\"Invalid email address format\"}}const response=await fetch(\"https://api.resend.com/emails\",{method:\"POST\",headers:{Authorization:`Bearer ${apiKey}`,\"Content-Type\":\"application/json\"},body:JSON.stringify({from:\"CreatorArmour <noreply@creatorarmour.com>\",to,subject,html})});if(!response.ok){const errText=await response.text().catch(()=>\"\");return{success:false,error:errText||`Resend error: ${response.status}`}}const data=await response.json();if(data.id)return{success:true,emailId:data.id};return{success:false,error:data.error?.message||\"Failed to send email\"}}catch(e){return{success:false,error:e?.message||\"Failed to send email\"}}}__name(sendEmail,\"sendEmail\");async function sendBrandSigningReminderEmail(brandEmail,data){const subject=\"Quick reminder: Please sign the collaboration contract\";const content=`\n    <tr>\n      <td style=\"background-color: #5b21b6; padding: 44px 30px; text-align: center;\">\n        <h1 style=\"margin: 0 0 8px 0; font-size: 22px; font-weight: 700; color: #ffffff !important;\">\n          Signature reminder\n        </h1>\n        <p style=\"margin: 0; font-size: 13px; color: #ffffff !important; opacity: 0.95;\">\n          Final step to activate your collaboration\n        </p>\n      </td>\n    </tr>\n    <tr>\n      <td style=\"padding: 24px 32px 6px 32px;\">\n        <p style=\"margin: 0 0 10px 0; font-size: 15px; font-weight: 600; color: #111827;\">Hi ${data.brandName||\"there\"},</p>\n        <p style=\"margin: 0; font-size: 14px; color: #4b5563; line-height: 1.7;\">\n          ${data.creatorName} is waiting for your signature. Signing keeps both sides protected and starts the collaboration.\n        </p>\n      </td>\n    </tr>\n    ${getEmailSignal({type:\"action\",message:\"Review the agreement and sign to confirm deliverables, payment terms, and deadlines.\"})}\n    ${getEmailProgressCue([{label:\"Agreement Ready\",status:\"current\"},{label:\"Signed\",status:\"upcoming\"},{label:\"Work Begins\",status:\"upcoming\"}])}\n    ${getPrimaryCTA(\"Review & Sign Contract\",data.contractReadyUrl)}\n    ${getCTATrustLine(\"Signing typically takes under 2 minutes and is fully recorded.\")}\n    <tr>\n      <td style=\"padding: 0 32px 28px 32px;\">\n        <p style=\"margin: 0; font-size: 13px; color: #6b7280; line-height: 1.6;\">\n          Need help? Contact <a href=\"mailto:${SUPPORT_EMAIL}\" style=\"color: #4f46e5; text-decoration: none;\">${SUPPORT_EMAIL}</a> and we\\u2019ll assist before any dispute arises.\n        </p>\n      </td>\n    </tr>\n  `;const html=getEmailLayout({content,showFooter:true,backgroundStyle:\"purple\"});return sendEmail(brandEmail,subject,html)}__name(sendBrandSigningReminderEmail,\"sendBrandSigningReminderEmail\");async function sendDealPendingReminderToBrand(brandEmail,data){const subject=\"Your collaboration with \"+(data.creatorName||\"creator\")+\" is still pending\";const ctaBlock=data.contractReadyUrl?getPrimaryCTA(\"Review & Sign Contract\",data.contractReadyUrl):`\n      <tr>\n        <td style=\"padding: 12px 32px 24px 32px;\">\n          <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"background-color: #f8fafc; border: 1px solid #e5e7eb; border-radius: 12px; padding: 14px;\">\n            <tr>\n              <td style=\"font-size: 13px; color: #4b5563; line-height: 1.6;\">\n                Check your inbox for the contract link from the creator, or ask them to resend it.\n              </td>\n            </tr>\n          </table>\n        </td>\n      </tr>\n    `;const content=`\n    <tr>\n      <td style=\"background-color: #4338ca; padding: 44px 30px; text-align: center;\">\n        <h1 style=\"margin: 0 0 8px 0; font-size: 22px; font-weight: 700; color: #ffffff !important;\">\n          Deal still pending\n        </h1>\n        <p style=\"margin: 0; font-size: 13px; color: #ffffff !important; opacity: 0.95;\">\n          A quick step keeps the collaboration moving\n        </p>\n      </td>\n    </tr>\n    <tr>\n      <td style=\"padding: 24px 32px 6px 32px;\">\n        <p style=\"margin: 0 0 10px 0; font-size: 15px; font-weight: 600; color: #111827;\">Hi ${data.brandName||\"there\"},</p>\n        <p style=\"margin: 0; font-size: 14px; color: #4b5563; line-height: 1.7;\">\n          Your collaboration with ${data.creatorName} has been pending for about a week. Completing the contract protects both sides and keeps timelines on track.\n        </p>\n      </td>\n    </tr>\n    ${getEmailSignal({type:\"next\",message:\"Sign the agreement to activate the deal and confirm the deliverables.\"})}\n    ${getEmailProgressCue([{label:\"Agreement Ready\",status:\"current\"},{label:\"Signed\",status:\"upcoming\"},{label:\"Work Begins\",status:\"upcoming\"}])}\n    ${ctaBlock}\n    ${data.contractReadyUrl?getCTATrustLine(\"Signing typically takes under 2 minutes and is fully recorded.\"):\"\"}\n    <tr>\n      <td style=\"padding: 0 32px 28px 32px;\">\n        <p style=\"margin: 0; font-size: 13px; color: #6b7280; line-height: 1.6;\">\n          Need help? Contact <a href=\"mailto:${SUPPORT_EMAIL}\" style=\"color: #4f46e5; text-decoration: none;\">${SUPPORT_EMAIL}</a> and we\\u2019ll help before any issue becomes a dispute.\n        </p>\n      </td>\n    </tr>\n  `;const html=getEmailLayout({content,showFooter:true,backgroundStyle:\"purple\"});return sendEmail(brandEmail,subject,html)}__name(sendDealPendingReminderToBrand,\"sendDealPendingReminderToBrand\");async function sendDealPendingReminderToCreator(creatorEmail,data){const subject=\"Deal with \"+(data.brandName||\"brand\")+\" is still pending\";const content=`\n    <tr>\n      <td style=\"background-color: #4c1d95; padding: 44px 30px; text-align: center;\">\n        <h1 style=\"margin: 0 0 8px 0; font-size: 22px; font-weight: 700; color: #ffffff !important;\">\n          Deal pending reminder\n        </h1>\n        <p style=\"margin: 0; font-size: 13px; color: #ffffff !important; opacity: 0.95;\">\n          Keep momentum and close the agreement\n        </p>\n      </td>\n    </tr>\n    <tr>\n      <td style=\"padding: 24px 32px 6px 32px;\">\n        <p style=\"margin: 0 0 10px 0; font-size: 15px; font-weight: 600; color: #111827;\">Hi ${data.creatorName||\"there\"},</p>\n        <p style=\"margin: 0; font-size: 14px; color: #4b5563; line-height: 1.7;\">\n          Your deal with ${data.brandName} has been pending for about a week. A gentle follow-up or resend often helps move things forward.\n        </p>\n      </td>\n    </tr>\n    ${getEmailSignal({type:\"next\",message:\"Consider sending the contract link again or checking in with the brand.\"})}\n    ${getEmailProgressCue([{label:\"Agreement Ready\",status:\"current\"},{label:\"Signed\",status:\"upcoming\"},{label:\"Work Begins\",status:\"upcoming\"}])}\n    ${getPrimaryCTA(\"Open Deal in Dashboard\",data.dashboardUrl)}\n    ${getCTATrustLine(\"Faster replies increase acceptance and reduce payment delays.\")}\n    <tr>\n      <td style=\"padding: 0 32px 28px 32px;\">\n        <p style=\"margin: 0; font-size: 13px; color: #6b7280; line-height: 1.6;\">\n          Need help? Contact <a href=\"mailto:${SUPPORT_EMAIL}\" style=\"color: #4f46e5; text-decoration: none;\">${SUPPORT_EMAIL}</a> and we\\u2019ll help before any issue becomes a dispute.\n        </p>\n      </td>\n    </tr>\n  `;const html=getEmailLayout({content,showFooter:true,backgroundStyle:\"purple\"});return sendEmail(creatorEmail,subject,html)}__name(sendDealPendingReminderToCreator,\"sendDealPendingReminderToCreator\");export{sendBrandSigningReminderEmail,sendDealPendingReminderToBrand,sendDealPendingReminderToCreator};\n","warnings":[],"map":{"version":3,"mappings":"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","names":[],"ignoreList":[],"sources":["/Users/pratyushraj/Documents/noticebazaar/server/src/services/dealReminderEmailService.ts"],"sourcesContent":[null]}}